<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta property="og:title" content="$ dev init" />
  <meta property="og:description" content="initialize your development through good material" />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="http://github.com/openhack-jgs/" />
  <!-- TODO -->
  <meta property="og:image"
    content="https://github.com/openhack-jgs/jgs-front-end/blob/master/assets/img/preview.png?raw=true" />

  <link rel=" shortcut icon" href="./assets/img/favicon.ico">
  <link rel="icon" href="./assets/img/favicon.ico">

  <title>dev init</title>
  <link href="assets/css/bootstrap.css" rel="stylesheet">
  <link href="assets/css/font-awesome.css" rel="stylesheet">
  <link href="assets/css/docs.css" rel="stylesheet">
  <link href="assets/css/style.css" rel="stylesheet">
  <link href="assets/css/add_post.css" rel="stylesheet">
  <link href="bootstrap-social.css" rel="stylesheet">

  <!-- google analytics -->
  <!-- <script type="text/javascript">
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-42119746-1']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script> -->
  <script src="https://code.jquery.com/jquery-latest.js"></script>
  <link rel="stylesheet" type="text/css" href="./assets/css/slideControl.css" />
</head>

<body>
  <div class="dev-init-header">
    <img class="dev-init-logo" src="assets/img/dev_init_logo.png" />
    <div class="dev-init-icons">
      <div class="dev-init-icons-box">
        <!-- <span class="dev-init-padding"></span> -->
        <img class="dev-init-profile" src="assets/img/dev_init_profile.png" />
        &nbsp&nbsp&nbsp
        <!-- <span class="dev-init-padding"></span> -->
        <span id="dev-init-login">Log In</span>
      </div>
    </div>
  </div>

  

  <div class="dev-init-bg-container">
    <div class="dev-init-bg-title-container">
      <h1 class="dev-init-bg-title">
        Find your link here!<br>
        Everything you seek is here.
      </h1>
      <br>
      <div class="dev-init-bg-subtitle">
        Find all links for junior developers at Dev init.<br>
        And register your URL!
      </div>
    </div>
  </div>

  <div class="container">
    <div class="dev-init-search-container">
      <div class="dev-init-search-container__inner">
        <form class="dev-init-search-box">
          <input type="text" class="form-control" id="keyword" placeholder="검색할 태그를 입력해주세요">
        </form>
        <img class="dev-init-search-black" onclick="search()" src="assets/img/dev_init_search_black.png">
      </div>
      <div id="add_filter2" data-toggle="collapse" href="#collapseExample" aria-expanded="false"
        aria-controls="collapseExample">
        필터 추가
        <img class="dev_init_tri" src="./assets/img/dev_init_tri.png">
      </div>
    </div>

    <div id="dev-init-filter-container">
      <div class="collapse" id="collapseExample">
        <div id="dev-init-filter-box">
          <div class="dev-init-category">
            <div class="dev-init-category-tag">
              <b>Web</b>
            </div>
            <div class="dev-init-category-web-sub-box">
              <!--  -->
            </div>
            <div class="dev-init-category-tag">
              <b>App</b>
            </div>
            <div class="dev-init-category-app-sub-box">
              <!--  -->
            </div>
          </div>
          <div class="dev-init-category-item">
            <div class="dev-init-category-web">
              <!--  -->
            </div>
            <div class="dev-init-category-web-sub">
              <!--  -->
            </div>
            <div class="dev-init-category-app">
              <!--  -->
            </div>
            <div class="dev-init-category-app-sub">
              <!--  -->
            </div>
          </div>
        </div>
      </div>

    </div>

    <div id="dev-init-posts-container">
      <!--  -->
    </div>
  </div>

  <footer>
  </footer>

  <img src="./assets/img/dev_init_plus.png" class="float" data-toggle="modal" data-target="#myModal">
  <!-- <a href="#" class="float">
    <i class="fa fa-plus my-float"></i>
  </a> -->

  <!-- Modal -->
  <!-- The Modal -->
  <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-header">

        <div class="modal-head">
          <div class="new">NEW
            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                aria-hidden="true">&times;</span></button>
          </div>
        </div>

        <div id="url_box"> URL
          <input type="text" id="url" onfocusout="url_focusout()">
        </div>

        <!--tag-->
        <div id="tag_box">TAG
          <ul id="removeConfirmationTags">
            <li>tag</li>
          </ul>
        </div>

        <!--slider-->
        <div class="content">
          <input type="hidden" value="6.0" class="slideControl" maxlength="3" name="level" id="level" />
        </div>

        <table id="table_box">
          <tr data-href="www.naver.com" style="cursor:pointer;" id="img_box">
            <td><img src="#" id='image' style=" width: 40px; height: 40px;"></td>
            <td id='description' style="color:#000000 ; font-family: NanumSquareR; font-size :12px;">description</td>
          </tr>
        </table>

        <div id="submit_box">
          <input type="button" value="submit" style="color:#ffffff; font-family: NanumSquareB; font-size:12px;"
            onclick="send_data()" data-dismiss="modal" aria-label="Close" id="submit_button">
          </input>
        </div>

      </div>
    </div>
  </div>

  <!-- Firebase App (the core Firebase SDK) is always required and must be listed first -->
  <script src="https://www.gstatic.com/firebasejs/5.10.1/firebase-app.js"></script>

  <!-- Add Firebase products that you want to use -->
  <script src="https://www.gstatic.com/firebasejs/5.10.1/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/5.10.1/firebase-firestore.js"></script>
  <script src="./init-firebase.js"></script>

  <script src="assets/js/jquery.js"></script>
  <script src="./assets/js/bootstrap.js"></script>
  <link rel="stylesheet" href="./assets/css/bootstrap.css">

  <script src="assets/js/docs.js"></script>

  <script type="text/javascript">
    var comment_postid;
    $('.dev-init-logo').click(() => {
      window.location.href = './index.html';
    })
    $('.dev-init-profile').click(() => {
      window.location.href = './mypage.html';
    })
    var provider2 = new firebase.auth.GoogleAuthProvider();
    var tag_infos;
    $('#add_filter').click(() => {
      $('#dev-init-filter-container').html(
        `
        <div id="dev-init-filter-box">
        <div class="dev-init-category">
          <div class="dev-init-category-tag">
            <b>Web</b>
          </div>
          <div class="dev-init-category-web-sub-box">
            <!--  -->
          </div>
          <div class="dev-init-category-tag">
            <b>App</b>
          </div>
          <div class="dev-init-category-app-sub-box">
            <!--  -->
          </div>
        </div>
        <div class="dev-init-category-item">
          <div class="dev-init-category-web">
            <!--  -->
          </div>
          <div class="dev-init-category-web-sub">
            <!--  -->
          </div> 
          <div class="dev-init-category-app">
            <!--  -->
          </div>
          <div class="dev-init-category-app-sub">
            <!--  -->
          </div>
        </div>
      </div>
      `);

      let contentsHTML_web = '';
      let contentsHTML_app = '';
      tag_infos.forEach((item) => {
        const random_key = Math.random();
        if (item['type'] == 'WEB') {
          tag_list[item['name']] = item['tag'];
          contentsHTML_web +=
            `
            <div id="${random_key}" type="web" class="dev-init-category-tag" onclick="toggle_css(${random_key}, 'web', 1)">${item['name']}</div>
            `;
        } else {
          contentsHTML_app +=
            `
            <div id="${random_key}" type="app" class="dev-init-category-tag" onclick="toggle_css(${random_key}, 'app', 1)">${item['name']}</div>
            `;
        }
      })
      $('.dev-init-category-web').html(contentsHTML_web);
      $('.dev-init-category-app').html(contentsHTML_app);
    });

    var tag_list = {}
    var search_list = [];

    var toggle_css = function (key, type, flag) {
      document.getElementById(`${key}`).classList.toggle("dev-init-category-tag-selected");

      if (flag == 1) {
        if (document.getElementsByClassName('dev-init-category-tag-selected').item(tag_list.length).innerHTML) {
          search_list.push(document.getElementsByClassName('dev-init-category-tag-selected').item(0).innerHTML)
          if (type == 'web') {
            var temp = tag_list[document.getElementsByClassName('dev-init-category-tag-selected').item(0).innerHTML];
            var tempHTML_web = '';
            for (var key in temp) {
              const random_key = Math.random();
              tempHTML_web +=
                `
              <div id="${random_key}" type="web" class="dev-init-category-tag" onclick="toggle_css(${random_key}, 'web', 0)">${key}</div>
              `;
            }
            $('.dev-init-category-web-sub').html(tempHTML_web);
          } else {
            var temp = tag_list[document.getElementsByClassName('dev-init-category-tag-selected').item(0).innerHTML];
            var tempHTML_app = '';
            for (var key in temp) {
              const random_key = Math.random();
              tempHTML_app +=
                `
              <div id="${random_key}" type="web" class="dev-init-category-tag" onclick="toggle_css(${random_key}, 'app', 0)">${key}</div>
              `;
            }
            $('.dev-init-category-app-sub').html(tempHTML_app);
          }

          $.ajax({
            method: "GET",
            url: "http://106.10.34.9:3000/search_filter",
            data: {
              'stack': document.getElementsByClassName('dev-init-category-tag-selected').item(0).textContent,
              'tag': document.getElementsByClassName('dev-init-category-tag-selected').item(document.getElementsByClassName('dev-init-category-tag-selected').length - 1).textContent,
            }
          }).then((data) => {
            console.log(data)
            var contentsHTML = '';
            $('#dev-init-posts-container').html("");
            for (var i = 0; i < data.length; i++) {
              tag_str = '\0';
              for (var key in data[i]['tags']) { tag_str += key + ' '; }
              var avg_level = Math.round(Number(data[i]['level']) / Number(data[i]['level_count']));
              contentsHTML +=
                `
              <div class="dev-init-post">
                <div class="dev-init-img-box">
                  <img class="dev-init-img" src="${data[i]['og:image']}">
                </div>
                <div class="dev-init-post__right">

                  <div class="dev-init-post__right-left" data-postid="${data[i]['post_id']}" data-url="${data[i]['og:url']}" data-tags="${data[i]['tags']}">
                    <div>
                      <h3 class="dev-init-title">${data[i]['og:title']}</h3>
                      <p class="dev-init-description">${data[i]['og:description']}</p>
                    </div>
                    <ul class="dev-init-tags">
                      <li>${tag_str}</li>
                    </ul>
                  </div>

                  <div class="dev-init-post__right-right">
                    <div class="dev-init-level">
                      <span class="dev-init-level-label">Lv</span>
                      <span class="dev-init-level-data">${avg_level}</span>
                    </div>
                    <div class="dev-init-heart">
                      <img onclick="like(${data[i]['post_id']})" id="${data[i]['post_id']}" class="dev-init-heart-icon" src="./assets/img/dev_init_heartblack.png">
                    </div>
                  </div>
                </div>
              </div>
              `;
            }
            $('#dev-init-posts-container').html(contentsHTML);
          })
        }
      }
    }
    var login = () => {
      firebase.auth().signInWithPopup(provider2).then(function (result) {
        // This gives you a GitHub Access Token. You can use it to access the GitHub API.
        var token = result.credential.accessToken;
        // The signed-in user info.
        var user = result.user;
        // ...
        console.log(token);
        console.log(user);
      }).catch(function (error) {
        console.log(error);
        // Handle Errors here.
        var errorCode = error.code;
        var errorMessage = error.message;
        // The email of the user's account used.
        var email = error.email;
        // The firebase.auth.AuthCredential type that was used.
        var credential = error.credential;
        // ...
      });
    };

    var logout = () => {
      var result = confirm("정말로 로그아웃하시겠습니까?");
      if (result) {
        firebase.auth().signOut().then(function () {
          // alert("정상적으로 로그아웃되었습니다!");
        }).catch(function (error) {
          alert("서버에 문제가 있어 로그아웃에 실패했습니다.")
        });
      } else {
        // alert("저런~ 2018년에는 꼭 모두 이루세요!!");
      }

    }

    var like = (post_id) => {
      firebase.auth().onAuthStateChanged(function (user) {
        if (user) {
          $.ajax({
            method: "POST",
            url: "http://106.10.34.9:3000/like",
            data: {
              'client_id': user.uid,
              'post_id': post_id.id
            }
          }).then((data) => {
            $(`#${post_id.id}`).attr("src", './assets/img/dev_init_heart.png');
            $(`#${post_id.id}`).attr(`onclick", 'dislike(${post_id.id})`);
          })
        }
        else {
          login();
        }
      });
    }
    var dislike = (post_id) => {
      firebase.auth().onAuthStateChanged(function (user) {
        if (user) {
          $.ajax({
            method: "POST",
            url: "http://106.10.34.9:3000/dislike",
            data: {
              'client_id': user.uid,
              'post_id': post_id.id
            }
          }).then((data) => {
            $(`#${post_id.id}`).attr("src", './assets/img/dev_init_heartblack.png');
            $(`#${post_id.id}`).attr(`onclick", 'like(${post_id.id})`);
          })
        } else {
          login();
        }
      });
    }

    $(document).ready(function () {
      firebase.auth().onAuthStateChanged(function (user) {
        if (user) {
          // User is signed in.
          var displayName = user.displayName;
          var email = user.email;
          var emailVerified = user.emailVerified;
          var photoURL = user.photoURL;
          var isAnonymous = user.isAnonymous;
          var uid = user.uid;
          var providerData = user.providerData;
          // ...
          console.log(user);
          $("#dev-init-login").html(`<div onclick="logout()">Log Out</div>`);
        } else {
          // User is signed out.
          // ...
          $("#dev-init-login").html(`<div onclick="login()">Log In</div>`);
        }
      });

      $.ajax({
        method: "GET",
        url: "http://106.10.34.9:3000/main_page",
        data: {}
      }).then(function (data) {
        // console.log(dummy);
        console.log(data[0])
        let contentsHTML = '';
        let contentsHTML_web = '';
        let contentsHTML_app = '';
        tag_infos = data[0];
        data[0].forEach((item) => {
          const random_key = Math.random();
          if (item['type'] == 'WEB') {
            tag_list[item['name']] = item['tag'];
            contentsHTML_web +=
              `
            <div id="${random_key}" type="web" class="dev-init-category-tag" onclick="toggle_css(${random_key}, 'web', 1)">${item['name']}</div>
            `;
          } else {
            contentsHTML_app +=
              `
            <div id="${random_key}" type="app" class="dev-init-category-tag" onclick="toggle_css(${random_key}, 'app', 1)">${item['name']}</div>
            `;
          }
        })
        $('.dev-init-category-web').html(contentsHTML_web);
        $('.dev-init-category-app').html(contentsHTML_app);
        var tag_str;
        data[1].forEach(o => {
          var avg_level = Math.round(Number(o['level'] / o['level_count']));
          var k = o['post_id'];
          // if (o.tag == app) return;
          tag_str = '\0';
          for (var key in o['tags']) { tag_str += key + ' '; }
          contentsHTML +=
            `
          <div class="dev-init-post">
            <div class="dev-init-img-box">
              <img class="dev-init-img" src="${o['og:image']}">
            </div>
            <div class="dev-init-post__right">

              <div class="dev-init-post__right-left" data-postid="${o['post_id']}" data-url="${o['og:url']}" data-tags="${o['tags']}">
                <div>
                  <h3 class="dev-init-title">${o['og:title']}</h3>
                  <p class="dev-init-description">${o['og:description']}</p>
                </div>
                <ul class="dev-init-tags">
                  <li>${tag_str}</li>
                </ul>
              </div>

              <div class="dev-init-post__right-right">
                <div class="dev-init-level">
                  <span class="dev-init-level-label">Lv</span>
                  <span class="dev-init-level-data">${avg_level}</span>
                </div>
                <div class="dev-init-heart">
                  <img onclick="like(${o['post_id']})" id="${o['post_id']}" class="dev-init-heart-icon" src="./assets/img/dev_init_heartblack.png">
                </div>
              </div>
            </div>
          </div>
          `;
        });


        $('#dev-init-posts-container').html(contentsHTML);

        $(".dev-init-post__right-left").click(function () {
          //새창 띄우고
          window.open(this.dataset.url);

          //모달 띄우고
          get_post_tags();
          // console.log(this.dataset.postid);
          comment_postid = this.dataset.postid;
          comment_tags = this.dataset.tags;
          console.log(comment_postid);
          console.log(comment_postid);
          console.log(comment_postid);
          $('#comment_modal').modal('show');
        });
      });
    });
  </script>


  <!------------------------------------------------------------------------>
  <!-- Modal -->
  <!-- The Modal -->
  <div class="modal fade" id="comment_modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
    aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
              aria-hidden="true">&times;</span></button>
          <div class="FEEDBACK">FEED BACK</div>
          <div class="TAG">TAG</div>
          <ul id="removeConfirmationTags2"></ul>
          <div onclick="tag_problem();" class="tag_problem_font">select uncorrent tag</div>
          <!--slider-->
          <div class="content">
            <label class="LEVEL">LEVEL: </label><input type="text" value="6.0" class="slideControl" maxlength="3"
              id="comment_level" />
          </div>

          <div class="comment">
            COMMENT
            <textarea name="comment_box" id="comment" rows="5" cols="50"> </textarea>
          </div>

          <input type="button" value="submit" onclick="send_comment_data()" data-dismiss="modal"
            aria-label="Close"></input>
        </div>
      </div>
    </div>
  </div>
  <!-- Button trigger modal -->
  <!-- <button type="button" class="btn btn-primary btn-lg" data-toggle="modal" data-target="#myModal">
    Launch demo modal
  </button> -->
  <script>

    function tag_problem() {
      let tagsHTML = '';
      $.ajax({
        method: "GET",
        url: "http://106.10.34.9:3000/main_page",    //태그 url 수정
        data: {}
      })
        .done(function (data) {
          console.log(data);
          // alert(comment_postid);
          var i = 0;
          while (1) {
            if (comment_postid != data[1][i]['post_id']) { i++; continue; }
            for (var key in data[1][i]['tags']) {
              tagsHTML += `
                        <li class="tagit-choice ui-widget-content ui-state-default ui-corner-all tagit-choice-editable"><span class="tagit-label" onclick="this.style.color='red';">${key}</span><a class="tagit-close"><span>x</span><span class="ui-icon ui-icon-close"></span></a><input type="hidden" value="tag" name="tags" class="tagit-hidden-field"></li>              
                    `;
            }
            break;
          }
          console.log(tagsHTML);
          $('#removeConfirmationTags2').html(tagsHTML);
        });
    }

    function get_post_tags() {
      let tagsHTML = '';
      $.ajax({
        method: "GET",
        url: "http://106.10.34.9:3000/main_page",    //태그 url 수정
        data: {}
      })
        .done(function (data) {
          console.log(data);
          // alert(comment_postid);
          var i = 0;
          while (1) {
            if (comment_postid != data[1][i]['post_id']) { i++; continue; }
            for (var key in data[1][i]['tags']) {
              tagsHTML += `
                        <li class="tagit-choice ui-widget-content ui-state-default ui-corner-all tagit-choice-editable"><span class="tagit-label">${key}</span><a class="tagit-close"><span class="ui-icon ui-icon-close"></span></a><input type="hidden" value="tag" name="tags" class="tagit-hidden-field"></li>              
                    `;

            }
            break;
          }
          console.log(tagsHTML);
          $('#removeConfirmationTags2').html(tagsHTML);
        });
    }
    function url_focusout() {
      const m_name = $('#url').val();
      console.log(m_name)
      $.ajax({
        method: "GET",
        url: "http://106.10.34.9:3000/analysis_url",
        data: { url: m_name }
      })
        .done(function (data) {
          console.log(data);
          blog_data = data;
          // $('#image').text(data['og:image'])
          $("#image").attr("src", data['og:image']);
          $('#description').text(data['og:description'])
          //alert("Data Saved: " + data);
        });
    }
    //tag


    $(function () {
      var sampleTags = ['c++', 'java', 'php', 'coldfusion', 'javascript', 'asp', 'ruby', 'python', 'c', 'scala', 'groovy', 'haskell', 'perl', 'erlang', 'apl', 'cobol', 'go', 'lua'];

      //-------------------------------
      // Tag events
      //-------------------------------
      var eventTags = $('#eventTags');

      var addEvent = function (text) {
        $('#events_container').append(text + '<br>');
      };

      eventTags.tagit({
        availableTags: sampleTags,
        beforeTagAdded: function (evt, ui) {
          if (!ui.duringInitialization) {
            addEvent('beforeTagAdded: ' + eventTags.tagit('tagLabel', ui.tag));
          }
        },
        afterTagAdded: function (evt, ui) {
          if (!ui.duringInitialization) {
            addEvent('afterTagAdded: ' + eventTags.tagit('tagLabel', ui.tag));
          }
        },
        beforeTagRemoved: function (evt, ui) {
          addEvent('beforeTagRemoved: ' + eventTags.tagit('tagLabel', ui.tag));
        },
        afterTagRemoved: function (evt, ui) {
          addEvent('afterTagRemoved: ' + eventTags.tagit('tagLabel', ui.tag));
        },
        onTagClicked: function (evt, ui) {
          addEvent('onTagClicked: ' + eventTags.tagit('tagLabel', ui.tag));
        },
        onTagExists: function (evt, ui) {
          addEvent('onTagExists: ' + eventTags.tagit('tagLabel', ui.existingTag));
        }
      });
      //-------------------------------
      // Remove confirmation
      //-------------------------------
      $('#removeConfirmationTags').tagit({
        availableTags: sampleTags,
        removeConfirmation: true
      });
      $('#removeConfirmationTags2').tagit({
        availableTags: sampleTags,
        removeConfirmation: true
      });

    });
    var blog_data;
    function send_data() {
      var level = document.getElementById('level').value;
      var m_client_id = '';

      firebase.auth().onAuthStateChanged(function (user) {
        if (user) {
          m_client_id = user.uid
          var tags = {};

          var i = 0;
          while (1) {
            try {
              tags[document.getElementsByClassName("tagit-label")[i].innerHTML] = true;
            } catch {
              console.log(tags, 'eror!')
              break;
            }
            i++;
          }

          $.ajax({
            method: "POST",
            url: "http://106.10.34.9:3000/write_post",
            data: {
              'client_id': m_client_id,
              'og:title': blog_data['og:title'],
              'og:description': blog_data['og:description'],
              'og:image': blog_data['og:image'],
              'og:url': blog_data['og:url'],
              'level': level,
              'tags': tags
            }
          }).done((data) => {
            console.log(data);
          });
        } else {
          login();
        }
      });



    }
  </script>
  <link href="./assets/css/jquery.tagit.css" rel="stylesheet" type="text/css">
  <link href="./assets/css/tagit.ui-zendesk.css" rel="stylesheet" type="text/css">
  <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.9.2/jquery-ui.min.js" type="text/javascript"
    charset="utf-8"></script>
  <script src="./assets/js/tag-it.js" type="text/javascript" charset="utf-8"></script>

  <script type="text/javascript" src="./assets/js/jquery.slideControl.js"></script>
  <script type="text/javascript">
    jQuery(document).ready(function () {
      //slider
      $('.slideControl').slideControl();
    });

    function send_comment_data() {
      var level = document.getElementById('comment_level').value;
      var m_client_id = '';
      firebase.auth().onAuthStateChanged(function (user) {
        if (user) {
          m_client_id = user.uid;

          var m_com = $('#comment').val();

          $.ajax({
            method: "POST",
            url: "http://106.10.34.9:3000/feedback_post",
            data: {
              'client_id': m_client_id,
              'post_id': comment_postid,
              'level': level,
              'comment': m_com
            }
          });
        } else {
          login();
        }
      })
    }

    var search = () => {
      console.log($('#keyword').val())
      $.ajax({
        method: "GET",
        url: "http://106.10.34.9:3000/search",
        data: {
          keyword: $('#keyword').val()
        }
      }).then(data => {
        console.log('1');
        console.log(data);
        console.log('1');
        data.forEach(data => {
          console.log(data); var contentsHTML = '';
          $('#dev-init-posts-container').html("");
          for (var i = 0; i < data.length; i++) {
            tag_str = '\0';
            for (var key in data[0]['tags']) { tag_str += key + ' '; }
            var avg_level = Math.round(Number(data[0]['level']) / Number(data[0]['level_count']));
            contentsHTML +=
              `
              <div class="dev-init-post">
                <div class="dev-init-img-box">
                  <img class="dev-init-img" src="${data[0]['og:image']}">
                </div>
                <div class="dev-init-post__right">

                  <div class="dev-init-post__right-left" data-postid="${data[0]['post_id']}" data-url="${data[0]['og:url']}" data-tags="${data[0]['tags']}">
                    <div>
                      <h3 class="dev-init-title">${data[0]['og:title']}</h3>
                      <p class="dev-init-description">${data[0]['og:description']}</p>
                    </div>
                    <ul class="dev-init-tags">
                      <li>${tag_str}</li>
                    </ul>
                  </div>

                  <div class="dev-init-post__right-right">
                    <div class="dev-init-level">
                      <span class="dev-init-level-label">Lv</span>
                      <span class="dev-init-level-data">${avg_level}</span>
                    </div>
                    <div class="dev-init-heart">
                      <img onclick="like(${data[0]['post_id']})" id="${data[0]['post_id']}" class="dev-init-heart-icon" src="./assets/img/dev_init_heartblack.png">
                    </div>
                  </div>
                </div>
              </div>
              `;
          }
          $('#dev-init-posts-container').html(contentsHTML);
        })
      });
    }
  </script>
</body>

</html>